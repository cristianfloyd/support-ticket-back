## **Configuración de Laravel 12 con PostgreSQL**

Esta guía detalla los pasos para configurar un entorno de desarrollo para el backend de la aplicación de gestión de tickets, utilizando Laravel 12, FilamentPHP y Livewire, con una base de datos PostgreSQL.

### **1\. Requisitos del Sistema**

* PHP 8.2 o superior  
* Composer  
* Node.js  
* PostgreSQL

### **2\. Instalación de Laravel**

1. Crea un nuevo proyecto de Laravel usando Composer:  
   composer create-project \--prefer-dist laravel/laravel sistema\_de\_tickets  
   cd sistema\_de\_tickets

2. Configura la base de datos en el archivo .env:  
   DB\_CONNECTION=pgsql  
   DB\_HOST=127.0.0.1  
   DB\_PORT=5432  
   DB\_DATABASE=nombre\_de\_la\_base\_de\_datos  
   DB\_USERNAME=nombre\_de\_usuario  
   DB\_PASSWORD=tu\_contraseña

3. Ejecuta las migraciones iniciales de Laravel:  
   php artisan migrate

### **3\. Instalación de FilamentPHP**

1. Instala FilamentPHP usando Composer:  
   composer require filament/filament:"^3.0"

2. Publica los archivos de configuración de FilamentPHP:  
   php artisan filament:install

3. Crea un usuario administrador de FilamentPHP:  
   php artisan make:filament-user

### **4\. Instalación de Livewire**

1. Instala Livewire usando Composer:  
   composer require livewire/livewire

### **5\. Instalación de Dependencias Adicionales**

1. **Laravel Data:** Para la transferencia de datos entre la API y la aplicación.  
   composer require spatie/laravel-data

2. **Spatie Roles and Permissions:** Para la gestión de roles y permisos de usuario.  
   composer require spatie/laravel-permission

   Luego de la instalación, publica la configuración y ejecuta las migraciones:  
   php artisan vendor:publish \--provider="Spatie\\Permission\\PermissionServiceProvider"  
   php artisan migrate

### **6\. Configuración de Roles y Permisos**

1. Define los roles y permisos en un Seeder o directamente en una migración. Por ejemplo:  
   use Spatie\\Permission\\Models\\Role;  
   use Spatie\\Permission\\Models\\Permission;

   // Crear roles  
   $adminRole \= Role::create(\['name' \=\> 'admin'\]);  
   $agenteRole \= Role::create(\['name' \=\> 'agente'\]);  
   $usuarioRole \= Role::create(\['name' \=\> 'usuario'\]);

   // Crear permisos  
   $verTickets \= Permission::create(\['name' \=\> 'ver tickets'\]);  
   $crearTickets \= Permission::create(\['name' \=\> 'crear tickets'\]);  
   $editarTickets \= Permission::create(\['name' \=\> 'editar tickets'\]);  
   $asignarTickets \= Permission::create(\['name' \=\> 'asignar tickets'\]);  
   $cerrarTickets \= Permission::create(\['name' \=\> 'cerrar tickets'\]);  
   $verUsuarios \= Permission::create(\['name' \=\> 'ver usuarios'\]);  
   $editarUsuarios \= Permission::create(\['name' \=\> 'editar usuarios'\]);  
   $crearUsuarios \= Permission::create(\['name' \=\> 'crear usuarios'\]);

   // Asignar permisos a roles  
   $adminRole-\>givePermissionTo(\[$verTickets, $crearTickets, $editarTickets, $asignarTickets, $cerrarTickets, $verUsuarios, $editarUsuarios, $crearUsuarios\]);  
   $agenteRole-\>givePermissionTo(\[$verTickets, $crearTickets, $editarTickets, $asignarTickets, $cerrarTickets\]);  
   $usuarioRole-\>givePermissionTo(\[$verTickets, $crearTickets\]);

2. Asigna roles a los usuarios:  
   use App\\Models\\User;

   $user \= User::find(1); // Obtener el usuario  
   $user-\>assignRole('admin'); // Asignar el rol de administrador

### **7\. Configuración Adicional (Opcional)**

* **Laravel Sanctum:** Para la autenticación de la API. Si planeas crear una API para que otras aplicaciones interactúen con tu sistema de tickets, instala y configura Sanctum.  
* **Mail:** Configura el envío de correos electrónicos para las notificaciones. Puedes usar servicios como SendGrid, Mailgun, o el driver SMTP de Laravel.  
* **Logging:** Configura un sistema de logging centralizado (e.g., Sentry, Loggly) para monitorear errores y eventos importantes.